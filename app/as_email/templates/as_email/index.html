{% extends "as_email/base.html" %}
{% load static crispy_forms_tags %}
{% block title %}AS Email - Email Accounts{% endblock %}
{% block defer_compress_js %}
  {{ block.super }}
  <script defer type="module" src="{% static 'as_email/js/app.js' %}"></script>
{% endblock defer_compress_js %}
{% block content %}
  <div class="container">
    <p class="title is-1">Email Accounts</p>

    <div id="asemail-vue-app">
      {% if email_accounts %}
        {% for email_account, email_account_form in email_accounts %}
          <div class="card">
            <header class="card-header">
              <p class="card-header-title">{{email_account.email_address}}</p>
              <a href="#email-account-{{email_account.pk}}" data-action="collapse" data-target="email-account-{{email_account.pk}}" class="card-header-icon is-hidden-fullscreen" aria-label="more options">
                <span class="icon">
                  <ion-icon name="chevron-down-outline" aria-hidden="true"></ion-icon>
                </span>
              </a>
            </header>
            <div id="email-account-{{email_account.pk}}" class="is-collapsible">
              <div class="card-content">
                {% crispy email_account_form email_account_form.helper %}
              </div>
              <footer class="card-footer">
                <p class="card-footer-item">
                  <span>
                    <input class="button is-primary" type="submit" value="Apply">
                  </span>
                </p>
                <p class="card-footer-item">
                  <span>
                    <input class="button is-info" type="reset" value="Reset">
                  </span>
                </p>
              </footer>
            </div>
          </div>
        {% endfor %}
      {% else  %}
        <p>{{ user }}, you have no  email accounts.</p>
      {% endif %}
    </div>
  </div>
  {{ vue_data|json_script:"vue-data" }}

  <div id="vue-app">
    <h1>[[ myTitle ]]</h1>
    <button @click="update_foo" class="button">Yes</button>
  </div>
{% endblock %}
{% block javascript %}
  <script type="text/javascript">
   // Set APP_DEBUG on the window to indicate if we are in DEBUG mode or not
   // This comes from the `settings.DEBUG` in the django project's config.
   //
   window.APP_DEBUG = {{ settings.DEBUG|lower }};
  </script>
  {{ super.block }}
{% endblock javascript %}
